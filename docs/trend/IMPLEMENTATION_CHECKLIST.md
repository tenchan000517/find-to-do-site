# ✅ トレンドシステム実装チェックリスト

**目的**: 実装時の漏れを防ぎ、テスト結果と同等の品質を確保  
**重要度**: 🔴 Critical - このチェックリストで実装成功を保証

---

## 🚀 Phase 1: 即座実装（必須ソース）

### 📊 Zenn API 実装
#### 事前準備
- [ ] **エンドポイント設定**
  ```javascript
  const endpoints = {
    highQuality: 'https://zenn.dev/api/articles?order=liked_count&count=50',
    trending: 'https://zenn.dev/api/articles?order=trending&count=30',
    latest: 'https://zenn.dev/api/articles?order=latest&count=20'
  };
  ```
- [ ] **レート制限設定**: 500ms待機
- [ ] **タイムアウト設定**: 10秒
- [ ] **User-Agent設定**: ブラウザUser-Agent

#### 実装ポイント
- [ ] **順次実行**: liked_count → trending → latest の順
- [ ] **品質フィルタ**: いいね50+ OR (いいね20+ AND コメント5+)
- [ ] **重複除去**: article.id基準
- [ ] **データ構造統一**: 
  ```javascript
  {
    id, title, url, liked_count, comments_count, 
    published_at, topics, source: 'Zenn API'
  }
  ```

#### 検証項目
- [ ] **取得件数**: 60-80件
- [ ] **高品質記事**: 15件以上
- [ ] **エラー率**: 5%以下
- [ ] **実行時間**: 3秒以内

---

### 🌐 Hacker News API 実装
#### 事前準備
- [ ] **APIエンドポイント確認**
  ```javascript
  const topStoriesUrl = 'https://hacker-news.firebaseio.com/v0/topstories.json';
  const itemUrl = (id) => `https://hacker-news.firebaseio.com/v0/item/${id}.json`;
  ```
- [ ] **レート制限設定**: 100ms待機
- [ ] **取得範囲設定**: 上位30件

#### 実装ポイント
- [ ] **2段階取得**: トップストーリー取得 → 個別記事取得
- [ ] **フィルタ条件**: type='story' AND score>10
- [ ] **タイムスタンプ変換**: Unix時間→ISO文字列
- [ ] **エラー個別処理**: 1件失敗でも継続

#### 検証項目
- [ ] **取得件数**: 25-30件
- [ ] **平均スコア**: 50以上
- [ ] **全て英語記事**: 日本語記事混入なし
- [ ] **URL有効性**: 全URLアクセス可能

---

### 💼 キャリア系トレンド実装
#### 事前準備
- [ ] **拡張キーワード設定**: 15個以上
  ```javascript
  const careerKeywords = [
    '転職', 'キャリア', '就活', '働き方', 'スキルアップ', '副業',
    'AI活用', 'DX人材', 'リスキリング', 'ジョブ型雇用', 'Z世代'
    // ... 15個
  ];
  ```
- [ ] **RSS源設定**: 6個のGoogle News RSS
- [ ] **季節性ロジック**: 月に応じたキーワード生成

#### 実装ポイント
- [ ] **3層構造**:
  1. トレンドキーワード生成 (15件)
  2. RSS ニュース取得 (40-50件)  
  3. 季節性コンテンツ (5件)
- [ ] **キーワード当たり8件制限**: 過度取得防止
- [ ] **キャリア関連度チェック**: 90%以上維持
- [ ] **重複除去**: タイトル基準

#### 検証項目
- [ ] **取得件数**: 50-70件
- [ ] **ソース多様性**: 6つのRSS源から均等取得
- [ ] **関連度**: キャリア関連が90%以上
- [ ] **季節性反映**: 現在月のキーワード含有

---

### 📚 勉強・自己啓発系実装
#### 事前準備
- [ ] **書籍カテゴリ設定**: 3カテゴリ×8冊
  ```javascript
  const bookCategories = {
    'ビジネス書・自己啓発': ['7つの習慣', 'アドラー心理学', ...],
    '営業・マーケティング': ['営業力向上', 'コトラー', ...],
    '戦略・思考法': ['失敗の本質', '孫氏の兵法', ...]
  };
  ```
- [ ] **進行度設定**: 入門・初級・中級
- [ ] **学習科目設定**: 読書術、記憶術、集中力等

#### 実装ポイント
- [ ] **体系的生成**: カテゴリ×書籍×レベル
- [ ] **継続番号制**: #1, #2, #3... の対応準備
- [ ] **実践的タイトル**: 「実践的活用法」フォーマット
- [ ] **多角的アプローチ**: 同一テーマでも異なる切り口

#### 検証項目
- [ ] **取得件数**: 35-45件
- [ ] **カテゴリ分散**: 3カテゴリ均等分散
- [ ] **実用性**: 「実践的」「活用法」含有
- [ ] **体系性**: 構造化された学習パス

---

## 🔧 Phase 2: 改善版実装

### 📖 はてなブックマーク実装
#### 事前準備
- [ ] **複数URL準備**: 4つのエンドポイント
- [ ] **複数パターン準備**: 5つの抽出パターン
- [ ] **User-Agent設定**: 詳細なブラウザ情報
- [ ] **待機時間設定**: 2秒間隔

#### 実装ポイント
- [ ] **パターン順次試行**: 1つ成功で即停止
- [ ] **パターン4優先**: 実証済み最有効パターン
- [ ] **ユーザー数取得**: エンゲージメント指標
- [ ] **品質チェック**: タイトル長・URL有効性

#### 検証項目
- [ ] **取得件数**: 25-35件
- [ ] **成功パターン記録**: どのパターンで成功か
- [ ] **ユーザー数取得率**: 80%以上
- [ ] **高品質記事**: 100users以上が20%含有

---

## 🛠️ 共通実装要件

### 🔍 エラーハンドリング
- [ ] **段階的フォールバック**: プライマリ→フォールバック→最終手段
- [ ] **部分成功許容**: 1ソース失敗でも他継続
- [ ] **詳細ログ**: エラー原因・発生箇所記録
- [ ] **自動復旧**: 一時的エラーの再試行

### ⏱️ パフォーマンス
- [ ] **レート制限遵守**: ソース別適切間隔
- [ ] **並列処理**: 独立ソースの並列実行
- [ ] **タイムアウト**: 適切なタイムアウト設定
- [ ] **メモリ効率**: 大量データの効率処理

### 📊 品質保証
- [ ] **データ検証**: 必須フィールド存在確認
- [ ] **重複除去**: URL・ID・タイトル基準
- [ ] **フォーマット統一**: 統一データ構造
- [ ] **文字数制限**: タイトル10-200文字

### 🔄 監視・ログ
- [ ] **成功率記録**: ソース別成功率追跡
- [ ] **実行時間記録**: パフォーマンス監視
- [ ] **品質スコア記録**: 取得データ品質評価
- [ ] **エラー分類**: エラー種別ごとの集計

---

## 🎯 最終検証チェック

### 📈 数値目標達成確認
- [ ] **総取得件数**: 280件以上
- [ ] **ソース成功率**: 85%以上
- [ ] **高品質記事**: 50件以上
- [ ] **処理時間**: 60秒以内

### 📋 機能要件確認
- [ ] **曜日別動作**: 7曜日分の動作確認
- [ ] **カテゴリ分類**: 自動分類機能動作
- [ ] **重複回避**: 同一記事の重複なし
- [ ] **参考リンク**: 記事生成時のリンク挿入

### 🔧 非機能要件確認
- [ ] **安定性**: 3日連続実行成功
- [ ] **拡張性**: 新ソース追加容易性
- [ ] **保守性**: コード可読性・文書化
- [ ] **エラー耐性**: 外部エラーでの継続動作

---

## 🚨 危険サイン・即時対応項目

### ❌ レッドフラグ（即座対応必要）
- [ ] **取得件数急減**: 前回比50%以下
- [ ] **エラー率上昇**: 20%以上のエラー率
- [ ] **空データ**: 全項目が空・null
- [ ] **タイムアウト頻発**: 80%以上がタイムアウト

### ⚠️ イエローフラグ（注意監視）
- [ ] **品質低下**: 高品質記事が10件以下
- [ ] **偏り発生**: 特定ソースに90%以上依存
- [ ] **古いデータ**: 1週間以上前の記事が80%
- [ ] **関連度低下**: カテゴリ関連度70%以下

### ✅ 対応アクション
- レッドフラグ → **即座停止・原因調査・修正実装**
- イエローフラグ → **24時間以内調査・1週間以内改善**

---

## 📝 実装完了報告

### 📊 完了時提出項目
- [ ] **取得結果サマリー**: 各ソース件数・品質スコア
- [ ] **性能測定結果**: 実行時間・メモリ使用量
- [ ] **品質検証結果**: 手動確認による品質評価
- [ ] **安定性テスト**: 連続実行結果

### 📚 ドキュメント更新
- [ ] **実装ドキュメント**: 詳細実装内容
- [ ] **運用マニュアル**: 日常運用手順
- [ ] **トラブルシューティング**: 問題対応手順
- [ ] **ナレッジベース**: 新発見事項追加

---

**重要**: このチェックリストは実装品質を保証する重要文書です。各項目を順次確認し、✅をつけながら実装を進めてください。未チェック項目がある状態での本番運用は避けてください。

---

*📅 作成日: 2025年6月24日*  
*🔄 更新: 実装進捗に応じて随時更新*  
*✅ 完了時: 全項目チェック完了を確認*